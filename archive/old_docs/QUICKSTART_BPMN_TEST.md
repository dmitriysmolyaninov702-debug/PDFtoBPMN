# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –¢–µ—Å—Ç DeepSeek-OCR –Ω–∞ BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

1. ‚úÖ **OCR —Å–µ—Ä–≤–∏—Å** —Å BPMN-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏
2. ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö 54 –∏ 26
3. ‚úÖ **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

---

## üéØ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ (3 –∫–æ–º–∞–Ω–¥—ã)

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ OCR —Å–µ—Ä–≤–∏—Å

```bash
cd ~/Obligations
source DeepSeek-OCR/venv/bin/activate
python -m uvicorn pdf_to_context.ocr_service.app:app --host 0.0.0.0 --port 8000
```

**–û–∂–∏–¥–∞–π—Ç–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ ~30-60 —Å–µ–∫—É–Ω–¥ (–º–æ–¥–µ–ª—å —É–∂–µ –≤ –∫—ç—à–µ)

**–í—ã —É–≤–∏–¥–∏—Ç–µ:**
```
INFO:     Started server process
INFO:     üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ DeepSeek-OCR...
INFO:     ‚úÖ DeepSeek-OCR —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç

```bash
cd ~/Obligations
source DeepSeek-OCR/venv/bin/activate
python test_bpmn_pages.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OCR —Å–µ—Ä–≤–∏—Å–∞ ‚úÖ
2. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã 54 (300 DPI) ‚Üí OCR —Å –ø—Ä–æ–º–ø—Ç–æ–º `bpmn`
3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã 26 (300 DPI) ‚Üí OCR —Å –ø—Ä–æ–º–ø—Ç–æ–º `complex_diagram`
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `output/bpmn_test/`

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30-60 —Å–µ–∫—É–Ω–¥ (2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

---

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```bash
ls -lh output/bpmn_test/

# –í—ã —É–≤–∏–¥–∏—Ç–µ:
# page_54_bpmn.png          - —Ä–µ–Ω–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
# page_54_bpmn.md           - —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
# page_54_bpmn.json         - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
# page_26_complex_diagram.png
# page_26_complex_diagram.md
# page_26_complex_diagram.json
```

**–û—Ç–∫—Ä–æ–π—Ç–µ markdown —Ñ–∞–π–ª—ã:**
```bash
cat output/bpmn_test/page_54_bpmn.md
```

---

## üìä –ß—Ç–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:

1. **–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã:**
   - –ü—Ä–æ—Ü–µ—Å—Å 1, –ü—Ä–æ—Ü–µ—Å—Å 2, –ü—Ä–æ—Ü–µ—Å—Å 3
   - –°–æ–±—ã—Ç–∏–µ 1, –°–æ–±—ã—Ç–∏–µ 2
   - Gateway (—à–ª—é–∑)

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:**
   - –í–∏–¥–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ü—Ä–æ—Ü–µ—Å—Å 1 ‚Üí Gateway ‚Üí –°–æ–±—ã—Ç–∏—è ‚Üí –ü—Ä–æ—Ü–µ—Å—Å—ã
   - –°–≤—è–∑–∏ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–æ–Ω—è—Ç–Ω—ã

3. **–¢–µ–∫—Å—Ç —á–∏—Ç–∞–µ–º—ã–π:**
   - –ù–∞–∑–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - –ù–µ—Ç "–º—É—Å–æ—Ä–Ω—ã—Ö" —Å–∏–º–≤–æ–ª–æ–≤

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:

1. –ü—Ä–æ–ø—É—â–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç—ã
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
3. –ü–æ—Ç–µ—Ä—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
4. –ú—É—Å–æ—Ä–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã

---

## üé® –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–º–ø—Ç–æ–≤

### 1. `bpmn` - BPMN –¥–∏–∞–≥—Ä–∞–º–º—ã
**–î–ª—è:** –ü—Ä–æ—Å—Ç—ã–µ –∏ —Å—Ä–µ–¥–Ω–∏–µ BPMN —Å—Ö–µ–º—ã  
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:** Tasks, Gateways, Events, Flows, Lanes

### 2. `complex_diagram` - –°–ª–æ–∂–Ω—ã–µ —Å—Ö–µ–º—ã
**–î–ª—è:** IDEF0, UML, –±–ª–æ–∫-—Å—Ö–µ–º—ã  
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:** –≠–ª–µ–º–µ–Ω—Ç—ã, –°–≤—è–∑–∏, –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏

### 3. `table` - –¢–∞–±–ª–∏—Ü—ã
**–î–ª—è:** RACI –º–∞—Ç—Ä–∏—Ü—ã, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏  
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:** Headers, Rows, Merged cells

### 4. `text_graphics` - –¢–µ–∫—Å—Ç + –≥—Ä–∞—Ñ–∏–∫–∞
**–î–ª—è:** –°–º–µ—à–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:** –ü–∞—Ä–∞–≥—Ä–∞—Ñ—ã, –û–ø–∏—Å–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∏

### 5. `default` - –ë–∞–∑–æ–≤—ã–π OCR
**–î–ª—è:** –û–±—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã  
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:** –í–µ—Å—å —Ç–µ–∫—Å—Ç –≤ markdown

---

## üß™ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:

```bash
curl http://localhost:8000/prompts | jq .
```

### –¢–µ—Å—Ç –Ω–∞ –æ–¥–Ω–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã 54)
# –ó–∞—Ç–µ–º:
curl -X POST "http://localhost:8000/ocr/figure" \
  -F "file=@output/bpmn_test/page_54_bpmn.png" \
  -F "prompt_type=bpmn" \
  | jq .markdown
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** `docs/BPMN_OCR_Strategy.md`
- **API Reference:** `DeepSeek-OCR/API_REFERENCE.md`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** `docs/Architecture.md`

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **–ü—Ä–æ–º–ø—Ç—ã:** `pdf_to_context/ocr_service/prompts.py`
- **OCR —Å–µ—Ä–≤–∏—Å:** `pdf_to_context/ocr_service/app.py`
- **–¢–µ—Å—Ç:** `test_bpmn_pages.py`

---

## ‚ùì FAQ

### Q: –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**A:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ venv –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
source DeepSeek-OCR/venv/bin/activate
pip install -r DeepSeek-OCR/requirements.txt
```

### Q: RTX 5080 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**A:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PyTorch 2.9.0+cu128:
```bash
pip uninstall -y torch torchvision torchaudio
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu128
```

### Q: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
**A:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—ã—Å—Ç—Ä–µ–µ.

---

## üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

1. **–û—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (—Ç–æ—á–Ω–æ—Å—Ç—å, –ø–æ–ª–Ω–æ—Ç–∞)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞ 10-15 —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
3. **–ü—Ä–∏–º–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ**: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–æ–±—É—á–µ–Ω–∏–µ?

### –ï—Å–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (>90% —Ç–æ—á–Ω–æ—Å—Ç–∏):

4. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å **BPMNParser** (Markdown ‚Üí IR)
5. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å **BPMNFormatter** (IR ‚Üí BPMN XML)
6. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ **Pipeline**

### –ï—Å–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (<80% —Ç–æ—á–Ω–æ—Å—Ç–∏):

4. –°–æ–±—Ä–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç (50-100 –ø—Ä–∏–º–µ—Ä–æ–≤)
5. Fine-tuning DeepSeek-OCR
6. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–ì–æ—Ç–æ–≤–æ! –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã!** üöÄ

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: OCR —Å–µ—Ä–≤–∏—Å
cd ~/Obligations && source DeepSeek-OCR/venv/bin/activate
python -m uvicorn pdf_to_context.ocr_service.app:app --host 0.0.0.0 --port 8000

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –¢–µ—Å—Ç
cd ~/Obligations && source DeepSeek-OCR/venv/bin/activate
python test_bpmn_pages.py
```








